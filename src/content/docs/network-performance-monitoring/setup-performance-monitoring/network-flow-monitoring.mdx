---
title: Set up network flow data monitoring
tags:
  - Integrations
  - Network performance monitoring
  - Installation
  - Setup
metaDescription: Set up Kentik's network flow data monitoring.
---

## Prerequisites [#prerequisites]

- A **New Relic account ID**. Read how to [find your account ID](https://docs.newrelic.com/docs/accounts/accounts-billing/account-setup/account-id/).
- An **Insights Insert Key**. Read how to [generate an Insights insert key](https://docs.newrelic.com/docs/apis/intro-apis/new-relic-api-keys/#insights-insert-key).
- [Docker](https://docs.docker.com/engine/install/) installed in your local machine.

## Supported types of network flow data [#supported-network-flow-data-types]

Kentik's integration supports four types of network flow data. When running the **ktranslate** image, you can specify which type you want to monitor using the `-nf.source` option.

<Callout variant="important">
The **ktranslate** image only supports monitoring one type of network flow data type at a time. If you want to monitor several types, each will require a container.
</Callout>

To check the equivalence among the network flow data type and the value you need to specify when running the image, see the following table:

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        Network flow data type
      </th>
      <th>
        `-nf.source` value
      </th>
    </tr>
  </thead>
    <tbody>
    <tr>
      <td>
        IPFIX
      </td>
      <td>
        `ipfix`
      </td>
    </tr>
    <tr>
      <td>
        NetFlow version 5
      </td>
      <td>
        `netflow5`
      </td>
    </tr>
    <tr>
      <td>
        NetFlow version 9
      </td>
      <td>
        `netflow9`
      </td>
    </tr>
    <tr>
      <td>
        sFlow
      </td>
      <td>
        `sflow`
      </td>
    </tr>
    </tbody>
</table>

<Callout variant="important">
For Juniper Networks `jFlow`, use the `netflow5` value.
</Callout>

## Set up network flow data monitoring in New Relic One [#setup-network-flow-monitoring]

1. In your local machine, from a Linux host with Docker installed, download the **ktranslate** image from [dockerhub](https://hub.docker.com/) by running 
  ```shell
  docker pull kentik/ktranslate:v2
  ```
2. Copy the `snmp-base.yaml` file to the local `$HOME` directory of your Docker user, and discard the container by running
    ```shell
    cd .
    id=$(docker create kentik/ktranslate:v2)
    docker cp $id:/etc/ktranslate/snmp-base.yaml .
    docker rm -v $id
    ```
3. In the `snmp-base.yaml` file, add your network flow devices inside the `devices` variable with the following structure:

  ```yaml
  devices:
    flowDevice:
      device_name: edge-router
      device_ip: 10.10.1.254
      snmp_flow_only: true
      user_tags:
        owning_team: net_eng
        environment: production
  ```

  <Callout variant="tip">
  If you're already monitoring SNMP data devices that send network flow data, you don't need to add them in your `snmp-base.yaml` file.
  </Callout>

4. Run `ktranslate` to poll network flow devices by entering the following commands:

  <Callout variant="important">
  Add your New Relic Insights insert key and your account ID in the `$NR_INSIGHTS_INSERT_KEY` and `$NR_ACCOUNT_ID` variables respectively.
  </Callout>

  ```shell
  docker run -d --name ktranslate-sflow --restart unless-stopped --net=host \
  -v `pwd`/snmp-base.yaml:/snmp-base.yaml \
  -e NEW_RELIC_API_KEY=$INSERT_API_KEY \
  kentik/ktranslate:v2 \
    -snmp /snmp-base.yaml \
    -nr_account_id=$NR_ACCOUNT_ID \
    -metrics=jchf \
    -log_level=info \
    -tee_logs=true \
    -snmp_flow_only=true \
    -nf.source=sflow \
    nr1.flow
  ```
5. [Visualize your network performance data in New Relic](https://docs-preview.newrelic.com/docs/integrations/kentik-network-performance-monitoring/monitoring-network-data/visualize-network-data).
