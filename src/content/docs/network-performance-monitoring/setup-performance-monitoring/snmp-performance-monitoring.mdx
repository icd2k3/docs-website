---
title: Set up SNMP monitoring
tags:
  - Integrations
  - Network performance monitoring
  - Installation
  - Setup
metaDescription: Set up Kentik's SNMP monitoring.
---

## Prerequisites [#prerequisites]

- A **New Relic account ID**. Read how to [find your account ID](https://docs.newrelic.com/docs/accounts/accounts-billing/account-setup/account-id/).
- An **Insights Insert Key**. Read how to [generate an Insights insert key](https://docs.newrelic.com/docs/apis/intro-apis/new-relic-api-keys/#insights-insert-key).
- [Docker](https://docs.docker.com/engine/install/) installed in a Linux host.

## Set up SNMP monitoring in New Relic One [#setup-snmp-monitoring]

1. In your local machine, from a Linux host with Docker installed, download the **ktranslate** image from [dockerhub](https://hub.docker.com/) by running 
  ```shell
  docker pull kentik/ktranslate:v2
  ```
2. Copy the `snmp-base.yaml` file to the local `$HOME` directory of your Docker user, and discard the container by running
    ```shell
    cd .
    id=$(docker create kentik/ktranslate:v2)
    docker cp $id:/etc/ktranslate/snmp-base.yaml .
    docker rm -v $id
    ```
3. Edit the `snmp-base.yaml` file and define the `cidrs` and `default_communities` variables to appropriate values for your network.
4. Optionally, you can launch a discovery run on SNMP devices. This helps you ensure your devices are ready to be monitored. This discovery run is based on the values you defined for the `cidrs` and `default_communities` variables by running
    ```shell
    docker run -ti --name ktranslate-discovery --rm --net=host \
    -v `pwd`/snmp-base.yaml:/snmp-base.yaml \
    kentik/ktranslate:v2 \
        -snmp /snmp-base.yaml \
        -log_level info \
        -snmp_discovery=true
    ```
  After the discovery run finishes, you should see an output similar to the following:
  ```shell
  >[Info] KTranslate Adding 3 new snmp devices to the config, 0 replaced from 3
  # In this example, the discovery run found 3 new SNMP devices.
  ```
  The discovered devices are listed in the `snmp-base.yaml` file. By default, only the `IF-MIB` mib is polled. You can manually add other mibs here if your devices support them. 
5. Run `ktranslate` to poll target devices. Use the following example:

  <Callout variant="important">
  Add your New Relic Insights insert key and your account ID in the `$NR_INSIGHTS_INSERT_KEY` and `$NR_ACCOUNT_ID` variables respectively.
  </Callout>

  ```shell
  docker run -d --name ktranslate-snmp --restart unless-stopped --net=host \
  -v `pwd`/snmp-base.yaml:/snmp-base.yaml \
  -e NEW_RELIC_API_KEY=$NR_INSIGHTS_INSERT_KEY  \
  kentik/ktranslate:v2 \
    -snmp /snmp-base.yaml \
    -nr_account_id=$NR_ACCOUNT_ID \
    -log_level=info \
    -metrics=jchf \
    -tee_logs=true \
    nr1.snmp 
  ```
6. To get better visibility into your network, [set up network flow data monitoring](/docs/network-performance-monitoring/setup-performance-monitoring/network-flow-monitoring).
7. [Visualize your network performance data in New Relic](/docs/network-performance-monitoring/monitoring-network-data/visualize-network-data).
